From e6fd5c742b506cc12755c7be371152f1c349da40 Mon Sep 17 00:00:00 2001
From: Alexandre Jutras <alexandre.jutras@linaro.org>
Date: Fri, 20 Mar 2020 14:14:55 -0400
Subject: [PATCH 7/9] [GStreamer][MSE] Report support for HEVC

Signed-off-by: Alexandre Jutras <alexandre.jutras@linaro.org>
---
 .../gstreamer/mse/MediaPlayerPrivateGStreamerMSE.cpp         | 5 ++++-
 1 file changed, 4 insertions(+), 1 deletion(-)

diff --git a/Source/WebCore/platform/graphics/gstreamer/mse/MediaPlayerPrivateGStreamerMSE.cpp b/Source/WebCore/platform/graphics/gstreamer/mse/MediaPlayerPrivateGStreamerMSE.cpp
index f6bf10ee1c4..c0016df900d 100644
--- a/Source/WebCore/platform/graphics/gstreamer/mse/MediaPlayerPrivateGStreamerMSE.cpp
+++ b/Source/WebCore/platform/graphics/gstreamer/mse/MediaPlayerPrivateGStreamerMSE.cpp
@@ -855,11 +855,14 @@ const static HashSet<AtomicString>& codecSet()
             Vector<AtomicString> webkitCodecs;
         };
 
-        std::array<GstCapsWebKitMapping, 8> mapping = { {
+        std::array<GstCapsWebKitMapping, 11> mapping = { {
             { VideoDecoder, "video/x-h264,  profile=(string){ constrained-baseline, baseline }", { "x-h264" } },
             { VideoDecoder, "video/x-h264, stream-format=avc", { "avc*"} },
             // An autoplugged h264parse in decodebin can convert from byte-stream to avc.
             { VideoDecoder, "video/x-h264, stream-format=byte-stream", { "avc*"} },
+            { VideoDecoder, "video/x-h265,  profile=(string){ constrained-baseline, baseline }", { "x-h265" } },
+            { VideoDecoder, "video/x-h265, stream-format=hev1", { "hev*", "hvc*"} },
+            { VideoDecoder, "video/x-h265, stream-format=byte-stream", { "hev*", "hvc*"} },
             { VideoDecoder, "video/mpeg, mpegversion=(int){1,2}, systemstream=(boolean)false", { "mpeg" } },
             { VideoDecoder, "video/x-vp8", { "vp8", "x-vp8" } },
             { VideoDecoder, "video/x-vp9", { "vp9", "x-vp9" } },
-- 
2.17.1

