From 4088bdb4027b56189dbbc5f2bcbceae054d915af Mon Sep 17 00:00:00 2001
From: Alexandre Jutras <alexandre.jutras@linaro.org>
Date: Fri, 14 Dec 2018 10:40:19 -0500
Subject: [PATCH 2/9] [GSTREAMER] Configure dependencies on GStreamer
 allocators

Signed-off-by: Alexandre Jutras <alexandre.jutras@linaro.org>
---
 Source/WebCore/platform/GStreamer.cmake | 2 ++
 Source/cmake/FindGStreamer.cmake        | 3 +++
 2 files changed, 5 insertions(+)

diff --git a/Source/WebCore/platform/GStreamer.cmake b/Source/WebCore/platform/GStreamer.cmake
index cb333c0e317..d9257af3ebb 100644
--- a/Source/WebCore/platform/GStreamer.cmake
+++ b/Source/WebCore/platform/GStreamer.cmake
@@ -59,6 +59,7 @@ if (ENABLE_VIDEO OR ENABLE_WEB_AUDIO)
         ${GSTREAMER_BASE_INCLUDE_DIRS}
         ${GSTREAMER_APP_INCLUDE_DIRS}
         ${GSTREAMER_PBUTILS_INCLUDE_DIRS}
+        ${GSTREAMER_ALLOC_INCLUDE_DIRS}
     )
 
     list(APPEND WebCore_LIBRARIES
@@ -67,6 +68,7 @@ if (ENABLE_VIDEO OR ENABLE_WEB_AUDIO)
         ${GSTREAMER_LIBRARIES}
         ${GSTREAMER_PBUTILS_LIBRARIES}
         ${GSTREAMER_AUDIO_LIBRARIES}
+        ${GSTREAMER_ALLOC_LIBRARIES}
     )
 
     # Avoiding a GLib deprecation warning due to GStreamer API using deprecated classes.
diff --git a/Source/cmake/FindGStreamer.cmake b/Source/cmake/FindGStreamer.cmake
index e0a4ee06cd2..c5aa95724e3 100644
--- a/Source/cmake/FindGStreamer.cmake
+++ b/Source/cmake/FindGStreamer.cmake
@@ -92,6 +92,7 @@ FIND_GSTREAMER_COMPONENT(GSTREAMER_PBUTILS gstreamer-pbutils-1.0 gstpbutils-1.0)
 FIND_GSTREAMER_COMPONENT(GSTREAMER_TAG gstreamer-tag-1.0 gsttag-1.0)
 FIND_GSTREAMER_COMPONENT(GSTREAMER_VIDEO gstreamer-video-1.0 gstvideo-1.0)
 FIND_GSTREAMER_COMPONENT(GSTREAMER_CODECPARSERS gstreamer-codecparsers-1.0 gstcodecparsers-1.0)
+FIND_GSTREAMER_COMPONENT(GSTREAMER_ALLOC gstreamer-allocators-1.0 gstallocators-1.0)
 
 # ------------------------------------------------
 # 3. Process the COMPONENTS passed to FIND_PACKAGE
@@ -132,4 +133,6 @@ mark_as_advanced(
     GSTREAMER_VIDEO_LIBRARIES
     GSTREAMER_CODECPARSERS_INCLUDE_DIRS
     GSTREAMER_CODECPARSERS_LIBRARIES
+    GSTREAMER_ALLOC_INCLUDE_DIRS
+    GSTREAMER_ALLOC_LIBRARIES
 )
-- 
2.17.1

